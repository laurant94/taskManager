<% if flash[:success].present? || flash[:danger].present? %>
  <div class="alert alert-<%= flash[:success] ? 'success' : 'danger' %>">
    <p id="danger"><%= t(danger) %></p>
    <p id="success"><%= t(success) %></p>
  </div>
<% end %>


<div class="">
  
<div class="row">
  <div class="col">
    <h1 class="text-center" >Users</h1>
  </div>
  <div class="col text-end">
    <%= link_to 'New User', new_admin_user_path, class:'btn btn-primary btn-sm' %>
  </div>
</div>

<table class="table">
  <thead class="table-light">
    <tr class="text-center">
      <th>Username</th>
      <th>Firstname</th>
      <th>lastname</th>
      <th>Email</th>
      <th>Tasks</th>
      <th>Role</th>
      <th colspan="3" >Actions</th>
    </tr>
  </thead>

  <tbody>
    
    <% if @users.empty? %>
      <td colspan="6">
        <h1 class="text-center h2" >No user for a moment. <%= link_to "Create first", new_admin_user_path %> </h1>
      </td>
      
    <% end %>
    
    <% @users.each do |user| %>
      <tr>
        <td><%= user.username %></td>
        <td><%= user.firstname %></td>
        <td><%= user.lastname %></td>
        <td><%= user.email %></td>
        <td><%= user.tasks.size %></td>
        <td><%= user.role %></td>
        <td><%= link_to 'Show', admin_user_path(user), class: "text-primary" %></td>
        <td><%= link_to 'Edit', edit_admin_user_path(user), class:"text-success" %></td>
        <td><%= link_to 'Destroy', admin_user_path(user), method: :delete, data: { confirm: 'Are you sure?' }, class: 'text-danger' %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>